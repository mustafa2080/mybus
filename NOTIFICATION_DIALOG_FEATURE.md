# ููุฒุฉ Dialog ุงูุฅุดุนุงุฑุงุช ุงูุชูุงุนููุฉ

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ ูุนุฑุถ dialog ุชูุงุนูู ุนูุฏูุง ูุตู ุงูุฅุดุนุงุฑ ูููุณุชุฎุฏู ุงููุทููุจุ ููุง ูุถูู ููุช ุงูุชุจุงู ุงููุณุชุฎุฏู ููุฅุดุนุงุฑ ุงูููู.

## ุงููููุงุช ุงูุฌุฏูุฏุฉ

### 1. `lib/services/notification_dialog_service.dart`
ุฎุฏูุฉ ูุชุฎุตุตุฉ ูุนุฑุถ dialog ุงูุฅุดุนุงุฑุงุช ุงูุชูุงุนููุฉ ูุน ุงูููุฒุงุช ุงูุชุงููุฉ:
- ุชุตููู ุฌุฐุงุจ ูุน ุชุฏุฑุฌุงุช ููููุฉ
- ุฃููููุงุช ูุฎุตุตุฉ ุญุณุจ ููุน ุงูุฅุดุนุงุฑ
- ุชุฃุซูุฑุงุช ุจุตุฑูุฉ (ูุจุถุฉุ ุธูุงู)
- ุฅุบูุงู ุชููุงุฆู ุจุนุฏ 8 ุซูุงู
- ุฃุฒุฑุงุฑ ุฅุฌุฑุงุกุงุช ุชูุงุนููุฉ
- ุงูุชุฒุงุฒ ูููุช ุงูุงูุชุจุงู

### 2. `notification_dialog_setup_example.dart`
ูุซุงู ุดุงูู ุนูู ููููุฉ ุงูุฅุนุฏุงุฏ ูุงูุงุณุชุฎุฏุงู ูุน ุดุงุดุฉ ุงุฎุชุจุงุฑ ุชูุงุนููุฉ.

### 3. `NOTIFICATION_DIALOG_FEATURE.md`
ุฏููู ุดุงูู ููููุฒุฉ ุงูุฌุฏูุฏุฉ.

## ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุชุตููู ุฌุฐุงุจ ููุชุฌุงูุจ
- **ุชุฏุฑุฌุงุช ููููุฉ**: ุฃููุงู ูุฎุชููุฉ ุญุณุจ ููุน ุงูุฅุดุนุงุฑ
- **ุฃููููุงุช ูุฎุตุตุฉ**: ุฃููููุฉ ููุงุณุจุฉ ููู ููุน ุฅุดุนุงุฑ
- **ุชุฃุซูุฑุงุช ุจุตุฑูุฉ**: ูุจุถุฉ ููุฃููููุฉ ูุธูุงู ูุชุญุฑูุฉ
- **ุชุตููู ูุชุฌุงูุจ**: ูุชููู ูุน ุฃุญุฌุงู ุงูุดุงุดุงุช ุงููุฎุชููุฉ

### 2. ุชูุงุนู ูุญุณู
- **ุงูุชุฒุงุฒ**: ุชูุจูู ููุณู ุนูุฏ ุธููุฑ ุงูุฅุดุนุงุฑ
- **ุฅุบูุงู ุชููุงุฆู**: ูุฎุชูู ุจุนุฏ 8 ุซูุงู ุชููุงุฆูุงู
- **ุฃุฒุฑุงุฑ ุชูุงุนููุฉ**: ุฅุบูุงู ุฃู ุนุฑุถ ุงูุชูุงุตูู
- **ุฅุฌุฑุงุกุงุช ูุฎุตุตุฉ**: ุญุณุจ ููุน ุงูุฅุดุนุงุฑ

### 3. ุฃููุงุน ุงูุฅุดุนุงุฑุงุช ุงููุฏุนููุฉ

#### ุฅุดุนุงุฑุงุช ุงูุทูุงุจ (ุฃุฎุถุฑ)
- **ุงูููุน**: `student`, `boarding`, `arrival`
- **ุงูุฃููููุฉ**: ๐ ุจุงุตุ ๐ ููุฒู
- **ุงูุฅุฌุฑุงุกุงุช**: ุนุฑุถ ุชูุงุตูู ุงูุทุงูุจ

#### ุฅุดุนุงุฑุงุช ุงูุบูุงุจ (ุฃุญูุฑ)
- **ุงูููุน**: `absence`, `emergency`
- **ุงูุฃููููุฉ**: โ๏ธ ุชุญุฐูุฑุ ๐ ุชูููู
- **ุงูุฅุฌุฑุงุกุงุช**: ุนุฑุถ ุชูุงุตูู ุงูุบูุงุจ

#### ุฅุดุนุงุฑุงุช ุงูุชุฑุญูุจ (ุฃุฒุฑู)
- **ุงูููุน**: `welcome`, `tutorial`
- **ุงูุฃููููุฉ**: ๐ ุงุญุชูุงูุ ๐ ูุฏุฑุณุฉ
- **ุงูุฅุฌุฑุงุกุงุช**: ุนุฑุถ ุงูุฏููู ุงูุชุนูููู

#### ุฅุดุนุงุฑุงุช ุฅุฏุงุฑูุฉ (ุจุฑุชูุงูู)
- **ุงูููุน**: `admin`, `assignment`
- **ุงูุฃููููุฉ**: โ๏ธ ุฅุนุฏุงุฏุงุชุ ๐ ุชูููู
- **ุงูุฅุฌุฑุงุกุงุช**: ุนุฑุถ ุชูุงุตูู ุงูุชูููู

#### ุฅุดุนุงุฑุงุช ุงูุฏุนู (ุจููุณุฌู)
- **ุงูููุน**: `support`
- **ุงูุฃููููุฉ**: ๐ ุฏุนู
- **ุงูุฅุฌุฑุงุกุงุช**: ุนุฑุถ ูุนูููุงุช ุงูุฏุนู

## ุงูุชูุงูู ูุน ุงููุธุงู ุงูููุฌูุฏ

### 1. ุชุญุฏูุซ ุฎุฏูุฉ ุงูุฅุดุนุงุฑุงุช ุงูุฑุฆูุณูุฉ
```dart
// ูู notification_service.dart
if (targetUserId != null && currentUser?.uid == targetUserId) {
  // ุนุฑุถ ุงูุฅุดุนุงุฑ ุงูุนุงุฏู
  _showSystemNotification(message, targetUserId);
  
  // ุนุฑุถ dialog ุชูุงุนูู ูููุช ุงูุงูุชุจุงู
  NotificationDialogService().showNotificationDialog(message);
}
```

### 2. ุฅุนุฏุงุฏ ููุชุงุญ ุงูุชููู ูู main.dart
```dart
class MyApp extends StatelessWidget {
  static final GlobalKey<NavigatorState> navigatorKey = GlobalKey<NavigatorState>();

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      navigatorKey: navigatorKey,
      builder: (context, child) {
        NotificationDialogService.setNavigatorKey(navigatorKey);
        return child!;
      },
      // ุจุงูู ุงูุฅุนุฏุงุฏุงุช...
    );
  }
}
```

## ููููุฉ ุนูู ุงููุธุงู

### 1. ุงุณุชูุจุงู ุงูุฅุดุนุงุฑ
```
ุฅุดุนุงุฑ FCM โ ุงูุชุญูู ูู ุงููุณุชุฎุฏู ุงููุณุชูุฏู โ ุนุฑุถ ุงูุฅุดุนุงุฑ ุงูุนุงุฏู + Dialog ุชูุงุนูู
```

### 2. ุนุฑุถ Dialog
```
ุชุดุบูู ุงูุชุฒุงุฒ โ ุนุฑุถ Dialog ูุน ุชุฃุซูุฑุงุช ุจุตุฑูุฉ โ ุฅุบูุงู ุชููุงุฆู ุจุนุฏ 8 ุซูุงู
```

### 3. ุชูุงุนู ุงููุณุชุฎุฏู
```
ุงููุณุชุฎุฏู ูุถุบุท "ุฅุบูุงู" โ ุฅุบูุงู ููุฑู
ุงููุณุชุฎุฏู ูุถุบุท "ุนุฑุถ ุงูุชูุงุตูู" โ ุฅุบูุงู Dialog + ุนุฑุถ ุชูุงุตูู ูุฎุตุตุฉ
```

## ุงูุงุฎุชุจุงุฑ

### ุดุงุดุฉ ุงูุงุฎุชุจุงุฑ ุงูุชูุงุนููุฉ
```dart
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => NotificationDialogTestScreen(),
  ),
);
```

### ุงุฎุชุจุงุฑ ุณุฑูุน
```dart
// ุฅูุดุงุก ุฅุดุนุงุฑ ูููู ููุงุฎุชุจุงุฑ
final fakeMessage = FakeRemoteMessage(
  notification: FakeNotification(
    title: 'ุฑูุจ ุฃุญูุฏ ุงูุจุงุต',
    body: 'ุฑูุจ ุงูุทุงูุจ ุฃุญูุฏ ูุญูุฏ ุงูุจุงุต ูู ุงูุณุงุนุฉ 7:30 ุตุจุงุญุงู',
  ),
  data: {
    'type': 'student',
    'studentName': 'ุฃุญูุฏ ูุญูุฏ',
    'busRoute': 'ุงูุฎุท ุงูุฃูู',
    'action': 'view_student',
  },
);

// ุนุฑุถ Dialog
NotificationDialogService().showNotificationDialog(fakeMessage);
```

## ุงูุชุฎุตูุต

### 1. ุชุฎุตูุต ุงูุฃููุงู
```dart
Color _getNotificationColor(String type) {
  switch (type.toLowerCase()) {
    case 'student':
      return Color(0xFF10B981); // ุฃุฎุถุฑ ูุฎุตุต
    case 'emergency':
      return Color(0xFFEF4444); // ุฃุญูุฑ ูุฎุตุต
    // ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃููุงู...
  }
}
```

### 2. ุชุฎุตูุต ุงูุฃููููุงุช
```dart
IconData _getNotificationIcon(String type) {
  switch (type.toLowerCase()) {
    case 'student':
      return Icons.directions_bus; // ุฃููููุฉ ูุฎุตุตุฉ
    // ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุฃููููุงุช...
  }
}
```

### 3. ุชุฎุตูุต ูุฏุฉ ุงูุนุฑุถ
```dart
// ุชุบููุฑ ูุฏุฉ ุงูุฅุบูุงู ุงูุชููุงุฆู ูู 8 ุซูุงู
Future.delayed(Duration(seconds: 10), () {
  // ุฅุบูุงู Dialog
});
```

## ุงูููุงุฆุฏ ูููุณุชุฎุฏููู

### ูููุดุฑููู:
- โ **ุชูุจูู ููุฑู** ุนูุฏ ุฑููุจ/ูุฒูู ุงูุทูุงุจ
- โ **ููุช ุงูุชุจุงู ุจุตุฑู** ูุน ุงูุฃููุงู ูุงูุชุฃุซูุฑุงุช
- โ **ุชูุงุนู ุณุฑูุน** ูุน ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช
- โ **ูุนูููุงุช ูุงุถุญุฉ** ูู ุชุตููู ุฌุฐุงุจ

### ูุฃูููุงุก ุงูุฃููุฑ:
- โ **ุชูุจูู ููุฑู** ุนู ุญุงูุฉ ุฃุทูุงููู
- โ **ุชุตููู ูุงุถุญ** ูุณูู ุงูููู
- โ **ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ** ูุนุฑุถ ุงูุชูุงุตูู
- โ **ุฑุงุญุฉ ุจุงู** ูุน ุงูุชูุจููุงุช ุงููุงุถุญุฉ

### ููุฅุฏูู:
- โ **ุชูุจููุงุช ุฅุฏุงุฑูุฉ** ูุงุถุญุฉ ููููุฒุฉ
- โ **ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ** ููููุงู ุงูุฅุฏุงุฑูุฉ
- โ **ุชูุธูู ุฃูุถู** ููุฅุดุนุงุฑุงุช ุญุณุจ ุงูููุน

## ุฃูุถู ุงูููุงุฑุณุงุช

1. **ุชุฃูุฏ ูู ุฅุนุฏุงุฏ ููุชุงุญ ุงูุชููู** ูู main.dart
2. **ุงุฎุชุจุฑ ุฌููุน ุฃููุงุน ุงูุฅุดุนุงุฑุงุช** ูุจู ุงููุดุฑ
3. **ุฎุตุต ุงูุฃููุงู ูุงูุฃููููุงุช** ุญุณุจ ูููุฉ ุงูุชุทุจูู
4. **ุฑุงูุจ ุฃุฏุงุก Dialog** ูุชุฃุซูุฑู ุนูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
5. **ุงุณุชุฎุฏู ุงูุงูุชุฒุงุฒ ุจุญุฐุฑ** ูุชุฌูุจ ุงูุฅุฒุนุงุฌ

## ุงููุดุงูู ุงููุญุชููุฉ ูุงูุญููู

### ุงููุดููุฉ: Dialog ูุง ูุธูุฑ
**ุงูุญู**: ุชุฃูุฏ ูู ุฅุนุฏุงุฏ ููุชุงุญ ุงูุชููู ุจุดูู ุตุญูุญ

### ุงููุดููุฉ: Dialog ูุธูุฑ ูููุณุชุฎุฏู ุงูุฎุทุฃ
**ุงูุญู**: ุชุฃูุฏ ูู ุงูุชุญูู ูู `targetUserId` ูุจู ุงูุนุฑุถ

### ุงููุดููุฉ: ุชุฃุซูุฑ ุนูู ุงูุฃุฏุงุก
**ุงูุญู**: ููู ูู ุงูุชุฃุซูุฑุงุช ุงูุจุตุฑูุฉ ุฃู ูุฏุฉ ุงูุนุฑุถ

## ุงูุฎูุงุตุฉ

ููุฒุฉ Dialog ุงูุฅุดุนุงุฑุงุช ุงูุชูุงุนููุฉ ุชุญุณู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุจุดูู ูุจูุฑ ูู ุฎูุงู:
- ๐ฏ **ููุช ุงูุงูุชุจุงู ุงููุนุงู** ููุฅุดุนุงุฑุงุช ุงููููุฉ
- ๐จ **ุชุตููู ุฌุฐุงุจ ููุชุฌุงูุจ** ููุงุณุจ ุฌููุน ุฃููุงุน ุงูุฅุดุนุงุฑุงุช
- โก **ุชูุงุนู ุณุฑูุน** ูุน ุฅุฌุฑุงุกุงุช ูุฎุตุตุฉ
- ๐ง **ุณูููุฉ ุงูุชุฎุตูุต** ูุงูุชูุงูู ูุน ุงููุธุงู ุงูููุฌูุฏ
- ๐ฑ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ** ูุน ุชูุจููุงุช ูุงุถุญุฉ ููุนุงูุฉ
