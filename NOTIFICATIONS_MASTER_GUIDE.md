# ุฏููู ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูุดุงูู - MyBus App

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ุงูููุญุฏ ูุญุชูู ุนูู ุฌููุน ุงููุนูููุงุช ุงููุชุนููุฉ ุจูุธุงู ุงูุฅุดุนุงุฑุงุช ูู ุชุทุจูู MyBusุ ุจุฏูุงู ูู ุงููููุงุช ุงููุชุนุฏุฏุฉ ูุงููุชูุฑุฑุฉ.

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ ุงูุฅุดุนุงุฑุงุช ุงููุญููุฉ
- **ุตูุช ูุงูุชุฒุงุฒ** ูุน ูู ุฅุดุนุงุฑ
- **ุธููุฑ ูู ุดุฑูุท ุงูุฅุดุนุงุฑุงุช** ุญุชู ูู ูุงู ุงูุชุทุจูู ูุบูู
- **ุฅุดุนุงุฑุงุช ููุฑูุฉ** ูุฌููุน ุงูุฃุญุฏุงุซ ุงููููุฉ
- **ูููุงุช ููุธูุฉ** ุญุณุจ ููุน ุงูุฅุดุนุงุฑ
- **ุงุณุชุจุนุงุฏ ุงูุฅุฏูู** ูู ุฅุดุนุงุฑุงุช ุงูุนูููุงุช ุงูุชู ูููู ุจูุง

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### ุงูุฎุฏูุงุช ุงูุฑุฆูุณูุฉ
```
lib/services/
โโโ enhanced_notification_service.dart  # ุงูุฎุฏูุฉ ุงููุญุณูุฉ
โโโ notification_service.dart           # ุงูุฎุฏูุฉ ุงูุฃุณุงุณูุฉ
โโโ fcm_service.dart                    # ุฎุฏูุฉ FCM
โโโ fcm_background_handler.dart         # ูุนุงูุฌ ุงูุฎูููุฉ
```

### ูููุงุช ุงูุฅุดุนุงุฑุงุช
- `mybus_notifications` - ุงูุฅุดุนุงุฑุงุช ุงูุนุงูุฉ
- `student_notifications` - ุฅุดุนุงุฑุงุช ุงูุทูุงุจ
- `bus_notifications` - ุฅุดุนุงุฑุงุช ุงูุจุงุต
- `absence_notifications` - ุฅุดุนุงุฑุงุช ุงูุบูุงุจ
- `admin_notifications` - ุฅุดุนุงุฑุงุช ุงูุฅุฏุงุฑุฉ
- `emergency_notifications` - ุฅุดุนุงุฑุงุช ุงูุทูุงุฑุฆ

## ๐ฑ ุฃููุงุน ุงูุฅุดุนุงุฑุงุช

### 1. ุฅุดุนุงุฑุงุช ุงูุทูุงุจ ๐จโ๐
- **ุชุณููู ุงูุทุงูุจ**: ุฅุดุนุงุฑ ูููู ุงูุฃูุฑ ูุงููุดุฑู ูุงูุฅุฏุงุฑุฉ
- **ุฅูุบุงุก ุงูุชุณููู**: ุฅุดุนุงุฑ ุนูุฏ ุฅุฒุงูุฉ ุงูุทุงูุจ ูู ุงูุจุงุต
- **ุชุญุฏูุซ ุงูุจูุงูุงุช**: ุฅุดุนุงุฑ ุนูุฏ ุชุนุฏูู ูุนูููุงุช ุงูุทุงูุจ

### 2. ุฅุดุนุงุฑุงุช ุงูุจุงุต ๐
- **ุฑููุจ ุงูุทุงูุจ**: ุฅุดุนุงุฑ ููุฑู ูููู ุงูุฃูุฑ ุนูุฏ ุฑููุจ ุงูุจุงุต
- **ูุฒูู ุงูุทุงูุจ**: ุฅุดุนุงุฑ ุนูุฏ ูุตูู ุงูุทุงูุจ ูููุฏุฑุณุฉ/ุงูููุฒู

### 3. ุฅุดุนุงุฑุงุช ุงูุบูุงุจ ๐
- **ุทูุจ ุบูุงุจ ุฌุฏูุฏ**: ุฅุดุนุงุฑ ูููุดุฑู ูุงูุฅุฏุงุฑุฉ
- **ููุงููุฉ ุนูู ุงูุบูุงุจ**: ุฅุดุนุงุฑ ูููู ุงูุฃูุฑ
- **ุฑูุถ ุงูุบูุงุจ**: ุฅุดุนุงุฑ ูููู ุงูุฃูุฑ ูุน ุงูุณุจุจ

### 4. ุฅุดุนุงุฑุงุช ุงูุดูุงูู ๐ข
- **ุดููู ุฌุฏูุฏุฉ**: ุฅุดุนุงุฑ ููุฅุฏุงุฑุฉ
- **ุฑุฏ ุนูู ุงูุดููู**: ุฅุดุนุงุฑ ูููู ุงูุฃูุฑ

### 5. ุฅุดุนุงุฑุงุช ุงูุทูุงุฑุฆ ๐จ
- **ุญุงูุงุช ุงูุทูุงุฑุฆ**: ุฅุดุนุงุฑุงุช ุนุงููุฉ ุงูุฃููููุฉ
- **ุชุญุฏูุซ ุญุงูุฉ ุงูุฑุญูุฉ**: ุฅุดุนุงุฑุงุช ุชุฃุฎูุฑ ุฃู ุชุบููุฑ ุงููุณุงุฑ

## ๐ง ุงูุฅุนุฏุงุฏ ูุงูุชุดุบูู

### 1. ุชุญุฏูุซ Dependencies
```yaml
dependencies:
  flutter_local_notifications: ^17.2.2
  firebase_messaging: ^14.9.4
  audioplayers: ^6.0.0
  vibration: ^1.8.4
  uuid: ^4.4.0
```

### 2. ุชุดุบูู ุงูุชุทุจูู
```bash
flutter pub get
flutter run
```

### 3. ุงุฎุชุจุงุฑ ุงููุธุงู
- ุงูุชูู ุฅูู: `/test/notification-system`
- ุงุฎุชุจุฑ ุฌููุน ุฃููุงุน ุงูุฅุดุนุงุฑุงุช
- ุชุญูู ูู ุงูุตูุช ูุงูุงูุชุฒุงุฒ ูุงูุธููุฑ ูู ุดุฑูุท ุงูุฅุดุนุงุฑุงุช

## ๐๏ธ ุงูููุฒุงุช ุงููุญุณูุฉ

### ุงุณุชุจุนุงุฏ ุงูุฅุฏูู ูู ุงูุฅุดุนุงุฑุงุช ุงูุฐุงุชูุฉ
```dart
// ูุซุงู: ุนูุฏ ุชุณููู ุทุงูุจ
await NotificationService().notifyStudentAssignmentWithSound(
  studentId: student.id,
  studentName: student.name,
  busId: busId,
  parentId: student.parentId,
  supervisorId: supervisorId,
  excludeAdminId: currentUser?.uid, // ุงุณุชุจุนุงุฏ ุงูุฅุฏูู ุงูุญุงูู
);
```

### ุฅุดุนุงุฑุงุช FCM ููุฎูููุฉ
```dart
@pragma('vm:entry-point')
Future<void> firebaseMessagingBackgroundHandler(RemoteMessage message) async {
  await Firebase.initializeApp();
  await _showBackgroundNotification(message);
}
```

## ๐ฑ ุฅุนุฏุงุฏุงุช ุงูููุตุงุช

### Android (AndroidManifest.xml)
```xml
<uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
<uses-permission android:name="android.permission.VIBRATE" />

<meta-data
    android:name="com.google.firebase.messaging.default_notification_channel_id"
    android:value="mybus_notifications" />
```

### iOS (Info.plist)
```xml
<key>UIBackgroundModes</key>
<array>
    <string>remote-notification</string>
</array>
```

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุดุงุดุฉ ุงูุงุฎุชุจุงุฑ
- **ุงููุณุงุฑ**: `/test/notification-system`
- **ุงูููุฒุงุช**: ุงุฎุชุจุงุฑ ุฌููุน ุฃููุงุน ุงูุฅุดุนุงุฑุงุช
- **ุงูุชุญูู**: ุงูุตูุชุ ุงูุงูุชุฒุงุฒุ ุงูุธููุฑ ูู ุงูุดุฑูุท

### ุงุฎุชุจุงุฑ ูุฏูู
1. ุชุณููู ุทุงูุจ โ ุชุญูู ูู ุฅุดุนุงุฑ ููู ุงูุฃูุฑ ูุงููุดุฑู
2. ุฑููุจ/ูุฒูู ุทุงูุจ โ ุชุญูู ูู ุฅุดุนุงุฑ ููู ุงูุฃูุฑ
3. ุทูุจ ุบูุงุจ โ ุชุญูู ูู ุฅุดุนุงุฑ ุงููุดุฑู
4. ุดููู โ ุชุญูู ูู ุฅุดุนุงุฑ ุงูุฅุฏุงุฑุฉ

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฅุดุนุงุฑุงุช ูุง ุชุธูุฑ
1. ุชุญูู ูู ุฃุฐููุงุช ุงูุชุทุจูู
2. ุชุฃูุฏ ูู ุชูุนูู ุงูุฅุดุนุงุฑุงุช ูู ุฅุนุฏุงุฏุงุช ุงููุงุชู
3. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
4. ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู

### ูุง ููุฌุฏ ุตูุช
1. ุชุญูู ูู ุนุฏู ุชูุนูู ุงููุถุน ุงูุตุงูุช
2. ุชุฃูุฏ ูู ูุฌูุฏ ููู `notification_sound.mp3`
3. ุชุญูู ูู ุฅุนุฏุงุฏุงุช ููุงุฉ ุงูุฅุดุนุงุฑุงุช

### ุงูุฅุดุนุงุฑุงุช ูุชุฃุฎุฑุฉ
1. ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุชูููุฑ ุงูุจุทุงุฑูุฉ
2. ุฃุถู ุงูุชุทุจูู ููุชุทุจููุงุช ุงููุณุชุซูุงุฉ
3. ุชุญูู ูู ููุฉ ุงูุฅูุชุฑูุช

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงููุฑุงูุจุฉ

### ูุง ูุชู ุชุชุจุนู
- ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ
- ูุนุฏู ูุฑุงุกุฉ ุงูุฅุดุนุงุฑุงุช
- ุฃููุงุน ุงูุฅุดุนุงุฑุงุช ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู
- ุฃููุงุช ุงูุฐุฑูุฉ

### ุงูุณุฌูุงุช
- ุณุฌู ููุตู ูู ูุญุฏุฉ ุงูุชุญูู
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุชูุฏูุฉ
- ุชุชุจุน ุญุงูุฉ ุงูุฅุฑุณุงู

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงููุธุงู ูููุฑ:
- โ **ุฅุดุนุงุฑุงุช ุงุญุชุฑุงููุฉ** ุชุธูุฑ ูู ุดุฑูุท ุงูุฅุดุนุงุฑุงุช
- โ **ุตูุช ูุงูุชุฒุงุฒ** ูุน ูู ุฅุดุนุงุฑ
- โ **ุชูุธูู ุฐูู** ููุฅุดุนุงุฑุงุช ุญุณุจ ุงูููุน
- โ **ุงุณุชุจุนุงุฏ ุงูุฅุดุนุงุฑุงุช ุงูุฐุงุชูุฉ** ููุฅุฏูู
- โ **ุนูู ูู ุฌููุน ุญุงูุงุช ุงูุชุทุจูู** (ููุชูุญ/ุฎูููุฉ/ูุบูู)
- โ **ุงุฎุชุจุงุฑ ุดุงูู** ูุถูุงู ุงูุฌูุฏุฉ

---

**ููุงุญุธุฉ**: ูุฐุง ุงูุฏููู ูุญู ูุญู ุฌููุน ูููุงุช ุงูุฅุดุนุงุฑุงุช ุงููุชูุฑุฑุฉ ููููุฑ ูุฑุฌุน ููุญุฏ ุดุงูู.
